#+TITLE: From Org to Ghost: A Publishing Journey
#+DATE: 2026-01-29
#+AUTHOR: ii.coop
#+DESCRIPTION: Discover how org-mode transforms into beautiful Ghost posts‚Äîwith dynamically generated media.

#+GHOST_SLUG: org-to-ghost-publishing-journey
#+GHOST_TYPE: post
#+GHOST_STATUS: draft
#+GHOST_VISIBILITY: public
#+GHOST_TAGS: org-mode, ghost, tutorial, ox-ghost
#+GHOST_EXCERPT: Discover how org-mode transforms into beautiful Ghost posts‚Äîwith dynamically generated media.

#+PROPERTY: header-args :eval never-export
#+PROPERTY: header-args:shell :results output

* Generators                                                       :noexport:

#+NAME: timestamp
#+BEGIN_SRC elisp :results value
(format-time-string "%Y-%m-%d %H:%M:%S")
#+END_SRC

#+RESULTS: timestamp
: 2026-01-29 12:03:32

#+NAME: random-quote
#+BEGIN_SRC elisp :results value raw
(let ((quotes '(("Simple is better than complex." . "Zen of Python")
                ("Make it work, make it right, make it fast." . "Kent Beck")
                ("The best code is no code at all." . "Jeff Atwood")
                ("Documentation is a love letter to your future self." . "Damian Conway"))))
  (let ((q (nth (random (length quotes)) quotes)))
    (format "#+BEGIN_QUOTE\n\"%s\"\n‚Äî %s\n#+END_QUOTE" (car q) (cdr q))))
#+END_SRC

#+RESULTS: random-quote
#+BEGIN_QUOTE
"Documentation is a love letter to your future self."
‚Äî Damian Conway
#+END_QUOTE

* Navigation

*Jump to:* [[#part-1-what-you-see][Part 1: What You See]] ¬∑ [[#part-2-the-reveal][Part 2: The Reveal]] ¬∑ [[#part-3-the-generators][Part 3: The Generators]] ¬∑ [[#part-4-dynamic-output][Part 4: Dynamic Output]] ¬∑ [[#part-5-the-pipeline][Part 5: The Pipeline]] ¬∑ [[#quick-reference][Quick Reference]]

-----

* Part 1: What You See

#+BEGIN_CALLOUT :emoji üëã :color blue
Welcome! You're reading a Ghost blog post. But there's more here than meets the eye...
#+END_CALLOUT

This post demonstrates Ghost's rich content capabilities. *Everything you see was generated from a single org-mode file*‚Äîincluding the audio, images, and video.

** Rich Text

Ghost supports /italic/, *bold*, _underline_, +strikethrough+, and =inline code=.

** Interactive Elements

#+BEGIN_TOGGLE :heading "What's in this toggle?"
This content is hidden until you click! Perfect for FAQs or spoilers.
#+END_TOGGLE

#+BEGIN_CALLOUT :emoji ‚ö†Ô∏è :color yellow
Callouts highlight important information.
#+END_CALLOUT

** Embedded Video

#+BEGIN_EMBED :url https://www.youtube.com/watch?v=jNQXAC9IVRw :html "<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/jNQXAC9IVRw\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture\" allowfullscreen></iframe>"
The first YouTube video ever (2005)
#+END_EMBED

** Code Blocks

#+BEGIN_SRC python :eval no
# Syntax highlighting works automatically
def transform(org_file):
    """Convert org-mode to Ghost Lexical JSON."""
    return magic(org_file)
#+END_SRC

-----

* Part 2: The Reveal

#+BEGIN_CALLOUT :emoji üé≠ :color purple
*Plot twist:* Everything you just saw came from plain text.
#+END_CALLOUT

The callout above? Written as:

#+BEGIN_EXAMPLE
,#+BEGIN_CALLOUT :emoji üëã :color blue
Welcome! You're reading a Ghost blog post...
,#+END_CALLOUT
#+END_EXAMPLE

The YouTube embed?

#+BEGIN_EXAMPLE
,#+BEGIN_EMBED :url https://www.youtube.com/watch?v=jNQXAC9IVRw
The first YouTube video ever
,#+END_EMBED
#+END_EXAMPLE

That's it. Plain text ‚Üí beautiful post.

But wait‚Äîwhat about *dynamic* content? *‚Üí [[#part-3-the-generators][See the generators]]*

-----

* Part 3: The Generators

#+BEGIN_CALLOUT :emoji ‚öôÔ∏è :color blue
These code blocks *execute during export*, creating real media files that get uploaded to Ghost.
#+END_CALLOUT

** Audio Generator

This shell block converts text to speech and uploads the result:

#+BEGIN_EXAMPLE
,#+BEGIN_SRC shell :exports results :results output raw
TMPDIR=$(mktemp -d)
TEXT="This audio was generated by org mode during export"
espeak-ng "$TEXT" -w "$TMPDIR/a.wav"
ffmpeg -i "$TMPDIR/a.wav" -c:a libmp3lame -q:a 2 "$TMPDIR/demo-tts.mp3" -y
URL=$(node ghost.js upload "$TMPDIR/demo-tts.mp3" | grep -o 'https://...')
cat << EOF
,#+BEGIN_AUDIO :src $URL
Generated speech: "$TEXT"
,#+END_AUDIO
EOF
,#+END_SRC
#+END_EXAMPLE

‚Üí *See the output:* [[#generated-audio][Generated Audio]]

** Image Generator

ImageMagick creates gradient images with text overlay:

#+BEGIN_EXAMPLE
,#+BEGIN_SRC shell :exports results :results output raw
TMPDIR=$(mktemp -d)
magick -size 800x400 -define gradient:angle=135 "gradient:#e74c3c-#c0392b" \
  -font Helvetica-Bold -pointsize 48 -fill white \
  -gravity center -annotate +0+0 "Generated\nat Export" "$TMPDIR/demo.png"
URL=$(node ghost.js upload "$TMPDIR/demo.png" | grep -o 'https://...')
echo "[[${URL}][Dynamically generated image]]"
,#+END_SRC
#+END_EXAMPLE

‚Üí *See the output:* [[#generated-image][Generated Image]]

** Video Generator

FFmpeg creates video with text overlay and TTS narration:

#+BEGIN_EXAMPLE
,#+BEGIN_SRC shell :exports results :results output raw
TMPDIR=$(mktemp -d)
TEXT="Org Mode Powers This"
espeak-ng "$TEXT" -w "$TMPDIR/a.wav"
ffmpeg -f lavfi -i "color=c=#2d3436:s=640x360:d=5" -i "$TMPDIR/a.wav" \
  -vf "drawtext=text='${TEXT}':fontsize=36:fontcolor=white:x=(w-tw)/2:y=(h-th)/2" \
  -c:v libx264 -c:a aac -pix_fmt yuv420p -shortest "$TMPDIR/demo.mp4" -y
URL=$(node ghost.js upload "$TMPDIR/demo.mp4" | grep -o 'https://...')
cat << EOF
,#+BEGIN_VIDEO :src $URL
Generated video with TTS narration
,#+END_VIDEO
EOF
,#+END_SRC
#+END_EXAMPLE

‚Üí *See the output:* [[#generated-video][Generated Video]]

-----

* Part 4: Dynamic Output

#+BEGIN_CALLOUT :emoji ‚ú® :color green
Everything below was *created during export*. Each render produces fresh media!
#+END_CALLOUT

** Dynamic Timestamp

This document was rendered at: *call_timestamp()[:results raw] 2026-01-29 12:03:32*.

** Random Wisdom

Each export picks a different quote:

#+CALL: random-quote()[:results raw]

#+RESULTS:
#+BEGIN_QUOTE
"The best code is no code at all."
‚Äî Jeff Atwood
#+END_QUOTE

** Generated Audio

‚Üê *See the generator:* [[#audio-generator][Audio Generator]]

#+BEGIN_SRC shell :exports results :results output raw
TMPDIR=$(mktemp -d)
TEXT="This audio was generated by org mode during export"
espeak-ng "$TEXT" -w "$TMPDIR/a.wav" 2>/dev/null
ffmpeg -i "$TMPDIR/a.wav" -c:a libmp3lame -q:a 2 "$TMPDIR/demo-tts.mp3" -y 2>/dev/null
URL=$(cd /srv/ii.coop && node ghost.js upload "$TMPDIR/demo-tts.mp3" 2>&1 | grep -o 'https://[^ ]*')
rm -rf "$TMPDIR"
cat << EOF
#+BEGIN_AUDIO :src $URL
Generated speech: "$TEXT"
#+END_AUDIO
EOF
#+END_SRC

#+RESULTS:
#+BEGIN_AUDIO :src https://www.ii.coop/content/media/2026/01/demo-tts-2.mp3 :duration 3.2 :mimeType audio/mpeg
Generated speech: "This audio was generated by org mode during export"
#+END_AUDIO

** Generated Image

‚Üê *See the generator:* [[#image-generator][Image Generator]]

#+BEGIN_SRC shell :exports results :results output raw
TMPDIR=$(mktemp -d)
magick -size 800x400 -define gradient:angle=135 "gradient:#e74c3c-#c0392b" \
  -font Helvetica-Bold -pointsize 48 -fill white \
  -gravity center -annotate +0+0 "Generated\nat Export" "$TMPDIR/demo.png" 2>/dev/null
URL=$(cd /srv/ii.coop && node ghost.js upload "$TMPDIR/demo.png" 2>&1 | grep -o 'https://[^ ]*')
rm -rf "$TMPDIR"
echo "[[${URL}][Dynamically generated image with gradient and text]]"
#+END_SRC

#+RESULTS:
[[https://www.ii.coop/content/images/2026/01/demo-2.png][Dynamically generated image with gradient and text]]

** Generated Video

‚Üê *See the generator:* [[#video-generator][Video Generator]]

#+BEGIN_SRC shell :exports results :results output raw
TMPDIR=$(mktemp -d)
TEXT="Org Mode Powers This"
espeak-ng "$TEXT" -w "$TMPDIR/a.wav" 2>/dev/null
ffmpeg -f lavfi -i "color=c=#2d3436:s=640x360:d=5" -i "$TMPDIR/a.wav" \
  -vf "drawtext=text='${TEXT}':fontsize=36:fontcolor=white:x=(w-text_w)/2:y=(h-text_h)/2" \
  -c:v libx264 -c:a aac -pix_fmt yuv420p -shortest "$TMPDIR/demo.mp4" -y 2>/dev/null
URL=$(cd /srv/ii.coop && node ghost.js upload "$TMPDIR/demo.mp4" 2>&1 | grep -o 'https://[^ ]*')
rm -rf "$TMPDIR"
cat << EOF
#+BEGIN_VIDEO :src $URL
Generated video with TTS narration
#+END_VIDEO
EOF
#+END_SRC

#+RESULTS:
#+BEGIN_VIDEO :src https://www.ii.coop/content/media/2026/01/demo-2.mp4 :width 640 :height 360 :duration 1.5 :mimeType video/mp4
Generated video with TTS narration
#+END_VIDEO

-----

* Part 5: The Pipeline

#+BEGIN_CALLOUT :emoji üîß :color grey
How does plain text become a published Ghost post?
#+END_CALLOUT

#+BEGIN_SRC text :eval no
org-mode.org
    ‚îÇ
    ‚ñº  render-template.sh
    ‚îÇ  (executes all src blocks)
    ‚îÇ
    ‚îú‚îÄ‚Üí espeak-ng generates speech
    ‚îú‚îÄ‚Üí ImageMagick creates images
    ‚îú‚îÄ‚Üí ffmpeg produces video
    ‚îú‚îÄ‚Üí ghost.js uploads media
    ‚îÇ
    ‚ñº  ox-ghost exports to JSON
    ‚îÇ
    ‚ñº  enrich-lexical.js
    ‚îÇ  (fetches oEmbed, video metadata)
    ‚îÇ
    ‚ñº  ghost.js post create
    ‚îÇ
    ‚ñº
Ghost Post (what you're reading!)
#+END_SRC

-----

* Quick Reference

| Content | Org Syntax |
|---------+------------|
| Bold | =*bold*= |
| Italic | =/italic/= |
| Code | ~=code=~ |
| Link | =[[url][text]]= |
| Image | =[[image.jpg][alt]]= |
| Callout | =#+BEGIN_CALLOUT :emoji üí° :color blue= |
| Toggle | =#+BEGIN_TOGGLE :heading "Title"= |
| Embed | =#+BEGIN_EMBED :url youtube.com/...= |
| Audio | =#+BEGIN_AUDIO :src url.mp3= |
| Video | =#+BEGIN_VIDEO :src url.mp4= |

#+BEGIN_BUTTON :url https://orgmode.org :alignment center
Learn Org Mode
#+END_BUTTON

-----

* Conclusion

#+BEGIN_CALLOUT :emoji üöÄ :color green
*What you've seen:*
- Rich Ghost content from plain text
- Generators that create media during export
- Dynamic output that's fresh each render
- A complete pipeline from org to Ghost
#+END_CALLOUT

*Explore more:* [[#part-3-the-generators][The Generators]] ¬∑ [[#part-4-dynamic-output][Dynamic Output]] ¬∑ [[#part-5-the-pipeline][The Pipeline]]

Org-mode + Ghost = *programmable publishing*.

#+BEGIN_SRC elisp :exports results :results value raw
(format "#+BEGIN_CALLOUT :emoji üìã :color grey
*Build Info:* Generated %s with Emacs %s
#+END_CALLOUT"
        (format-time-string "%Y-%m-%d %H:%M")
        emacs-version)
#+END_SRC

#+RESULTS:
#+BEGIN_CALLOUT :emoji üìã :color grey
*Build Info:* Generated 2026-01-29 12:03 with Emacs 30.2
#+END_CALLOUT
